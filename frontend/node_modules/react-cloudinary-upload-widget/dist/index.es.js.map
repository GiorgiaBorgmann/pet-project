{"version":3,"file":"index.es.js","sources":["../src/components/WidgetButton.js","../src/functions/getterFunction.js","../src/functions/generateSignature.js","../src/functions/myWidget.js","../src/components/UploadWidget.js","../src/_hooks_/useScript.js","../src/index.js"],"sourcesContent":["import React from 'react'\n\nconst WidgetButton = ({ myWidgetFunction, style, buttonText }) => (\n  <>\n    <button\n      id='cloudinary_upload_button'\n      style={\n        style || {\n          color: 'white',\n          border: 'none',\n          width: '120px',\n          backgroundColor: 'green',\n          borderRadius: '4px',\n          height: '25px'\n        }\n      }\n      onClick={() => myWidgetFunction()}\n    >\n      {buttonText || 'Upload files'}\n    </button>\n  </>\n)\nexport default WidgetButton\n","import axios from 'axios'\n\nconst instance = axios.create()\n\ninstance.interceptors.response.use((response) => response.data)\n\nexport const getterFunction = ({\n  url,\n  data,\n  accepts,\n  contentType,\n  withCredentials\n}) => {\n  instance.defaults.headers.common['Accepts'] = accepts\n  instance.defaults.headers.common['Content-Type'] = contentType\n  instance.defaults.withCredentials = withCredentials\n  const options = {\n    url: url + '?nocache=' + new Date().getTime(),\n    method: 'get',\n    params: data\n  }\n\n  return instance(options)\n}\n","import { getterFunction } from './getterFunction'\n\nconst generateSignature = (\n  cb,\n  params,\n  {\n    generateSignatureUrl,\n    accepts,\n    contentType,\n    withCredentials,\n    customPublicId,\n    eager,\n    apiKey,\n    resourceType\n  },\n  logging\n) => {\n  params = [].concat(params) //params can be a single object or an array of objects\n  logging && console.log(params, 'Params')\n  Promise.all(\n    params.map((req) => {\n      const uploadParams = req\n      return getterFunction({\n        url: generateSignatureUrl,\n        data: {\n          params_to_sign: {\n            ...(eager && { eager: eager }),\n            ...(customPublicId && { public_id: customPublicId }),\n            ...(req.source && { source: req.source }),\n            timestamp: req.timestamp,\n            unique_filename: req.unique_filename,\n            ...(req.upload_preset && {\n              upload_preset: req.upload_preset\n            }),\n            ...(req.use_filename && { use_filename: req.use_filename })\n          }\n        },\n        accepts: accepts,\n        contentType: contentType,\n        withCredentials: withCredentials\n      }).then((response) => {\n        logging && console.log(response, 'Signature Response')\n        return Object.assign(\n          {\n            signature: response,\n            api_key: apiKey,\n            resource_type: resourceType\n          },\n          uploadParams\n        )\n      })\n    })\n  ).then((results) => {\n    logging && console.log(results, 'Results')\n    cb(results.length === 1 ? results[0] : results)\n  })\n}\n\nexport default generateSignature\n","import generateSignature from './generateSignature'\n\nconst myWidget = (\n  sources,\n  sourceKeys,\n  resourceType,\n  cloudName,\n  uploadPreset,\n  folder,\n  cropping,\n  generateSignatureUrl,\n  onSuccess,\n  onFailure,\n  logging,\n  customPublicId,\n  eager,\n  apiKey,\n  accepts,\n  contentType,\n  withCredentials,\n  use_filename,\n  unique_filename\n) => {\n  const widget =\n    !!window.cloudinary &&\n    window.cloudinary.createUploadWidget(\n      {\n        // showCompletedButton: true,\n        multiple: true,\n        showAdvancedOptions: true,\n        showPoweredBy: false,\n        sources: sources,\n        ...(sourceKeys && sourceKeys),\n        cloudName: cloudName,\n        uploadPreset: uploadPreset,\n        folder: folder,\n        cropping: cropping,\n        resourceType: resourceType,\n        ...(generateSignatureUrl && { use_filename: use_filename }),\n        ...(generateSignatureUrl && { unique_filename: unique_filename }),\n        ...(generateSignatureUrl && {\n          prepareUploadParams: async (cb, params) =>\n            await generateSignature(\n              cb,\n              params,\n              {\n                generateSignatureUrl,\n                accepts,\n                contentType,\n                withCredentials,\n                customPublicId,\n                eager,\n                apiKey,\n                resourceType\n              },\n              logging\n            )\n        })\n      },\n      (error, result) => {\n        if (!error && result && result.event === 'success') {\n          logging && console.log('Done! Here is the image info: ', result.info)\n          logging && console.log(result)\n          !!onSuccess && onSuccess(result)\n        } else if (!!error) {\n          !!onFailure\n            ? onFailure({ error: error, result: result })\n            : logging && console.log({ error: error, result: result })\n        } else {\n          logging && console.log(result)\n        }\n      }\n    )\n  widget.open()\n}\n\nexport default myWidget\n","import React from 'react'\nimport WidgetButton from './WidgetButton'\nimport myWidget from '../functions/myWidget'\n\nconst UploadWidget = ({\n  sources = [],\n  sourceKeys = null,\n  resourceType = 'auto',\n  cloudName = null,\n  uploadPreset = null,\n  buttonText = null,\n  style = null,\n  folder = null,\n  cropping = true,\n  generateSignatureUrl,\n  onSuccess = null,\n  onFailure = null,\n  logging = true,\n  customPublicId = null,\n  eager = null,\n  apiKey = null,\n  accepts = 'application/json',\n  contentType = 'application/json',\n  withCredentials = true,\n  use_filename = true,\n  unique_filename = false\n}) => {\n  const myWidgetFunction = () =>\n    myWidget(\n      sources,\n      sourceKeys,\n      resourceType,\n      cloudName,\n      uploadPreset,\n      folder,\n      cropping,\n      generateSignatureUrl,\n      onSuccess,\n      onFailure,\n      logging,\n      customPublicId,\n      eager,\n      apiKey,\n      accepts,\n      contentType,\n      withCredentials,\n      use_filename,\n      unique_filename\n    )\n\n  return (\n    <WidgetButton\n      myWidgetFunction={myWidgetFunction}\n      buttonText={buttonText}\n      style={style}\n    />\n  )\n}\n\n// params_to_sign: [\n//   ...(eager ? [`eager=${eager}`] : []),\n//   ...(imageName ? [`public_id=${imageName}`] : []),\n//   ...(req.source ? [`source=${req.source}`] : []),\n//   `timestamp=${req.timestamp}`,\n//   ...(req.upload_preset\n//     ? [`upload_preset=${req.upload_preset}`]\n//     : [])\nexport default UploadWidget\n","import { useEffect } from 'react'\n\nexport default (url) => {\n  useEffect(() => {\n    const script = document.createElement('script')\n\n    script.type = 'text/javascript'\n    script.src = url\n    script.async = true\n\n    document.body.appendChild(script)\n\n    return () => {\n      document.body.removeChild(script)\n    }\n  }, [url])\n}\n","import React from 'react'\nimport UploadWidget from './components/UploadWidget'\nimport useScript from './_hooks_/useScript'\n\nexport const WidgetLoader = () => (\n  <>{useScript('https://widget.cloudinary.com/v2.0/global/all.js')}</>\n)\nexport const Widget = (props) => <UploadWidget {...props} />\n"],"names":["WidgetButton","myWidgetFunction","style","buttonText","color","border","width","backgroundColor","borderRadius","height","instance","axios","create","interceptors","response","use","data","getterFunction","url","accepts","contentType","withCredentials","defaults","headers","common","options","Date","getTime","method","params","generateSignature","cb","logging","generateSignatureUrl","customPublicId","eager","apiKey","resourceType","concat","console","log","Promise","all","map","req","uploadParams","params_to_sign","public_id","source","timestamp","unique_filename","upload_preset","use_filename","then","Object","assign","signature","api_key","resource_type","results","length","myWidget","sources","sourceKeys","cloudName","uploadPreset","folder","cropping","onSuccess","onFailure","widget","window","cloudinary","createUploadWidget","multiple","showAdvancedOptions","showPoweredBy","prepareUploadParams","error","result","event","info","open","UploadWidget","useEffect","script","document","createElement","type","src","async","body","appendChild","removeChild","WidgetLoader","useScript","Widget","props"],"mappings":"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"}